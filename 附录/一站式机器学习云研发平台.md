# 一站式机器学习云研发平台

## 背景

我目前从事与游戏行业的风控领域，主要负责的是风控和画像这两块。尽管我从团队初始建立的时候就定义了各种服务模板以及脚手架，但在数据处理、模型构建、管理这块我并没有着重去管控，仅仅是设定了一些服务的标准（初始阶段需要的是快速响应需求），如今随着业务场景和团队成员的增加，有如下问题需要考虑：

1. 脚本模块共享问题，团队成员长期开发积累的技术脚本、模型等是否可以模块化用于给其他成员共用；
2. 不同数据及不同模型快速试验的的效率问题，我理想的解决方案是类似工作流那样自由组合脚本，从数据提取到模型构建再到模型管控以作业流的形式来完成（这也意味着只要公有模块覆盖面足够广，就可以进行组件拖拽式开发）；
3. 模型测试管理问题，每个模型有哪些版本？怎么快速测试？分别被哪些服务使用以及如何快速上线；
4. 资源调度问题，公司的数据存于云商，本地开发涉及的资源问题如何解决。

## 目标

这些问题也应该是搞数据模型这块的基本问题，实际上涵盖了一个数据模型开发到上线完整的生命周期。上述的需求可以分别拆开来看会衍生出怎样的目标：

- 第1、2两点在我看来可以归纳为一个问题，模块需要抽象，然后让开发者可以自由地从模块仓库选取自己需要的模块进行组合，最终形成一个从数据提取到模型构建再到模型管控的工作流；一个项目可以有多个工作流，工作流的最小元素是模块，工作流的运行参数可以自由定义，开发者可以通过调整参数来快速调优；**模块（函数）即服务**，组合完毕就意味着一个需求的实现；
- 第3点的实现离不开两个基础服务，一是模型自动API服务化，二是模型管控服务；
- 第4点可以从两个方向入手，引入资源管理系统，如`k8s`或者云商的资源管理服务。

一切事情都有很多种解决方案，随着云原生的普及，我期望最终解决方案有这两个特性：

- 低代码（高层次人员无代码）：基于现有的基础设施（脚手架、模型代码库、模板）可以根据通用模块结合个性化配置形成工作流就可以构建一个机器学习应用，工作流为核心的低代码、甚至无代码工作方式是我的期望，那么代码谁来写？这又是一个值得深入探讨的问题，目前暂不探讨，现在就假设有底层程序员在持续奋斗；
- 云开发：因为涉及到资源的调度（数据计算、模型训练等），所以一个模型从数据输入到模型输出的开发流程都可以在云端完成（特别是数据处理和魔性训练），浏览器就是一切

所以，总结下我的需求，我需要的是一个满足数据计算、训练、管理的**一站式机器学习云研发平台**；而这个平台具有管理一个模型生命周期且形成闭环的功能，如：

- 数据的访问与计算是无限制的；
- 模块即服务且可互相共享；
- 一个需求的解决方案是**模块的自由组合**，需求的产物是一个个模型；
- 模型可自动API服务化且可快速上线

接下来，让我们谈谈如何实现这个**一站式机器学习云研发平台**。

## 流程

对于**一站式机器学习云研发平台**，我们现在对其有很明确的特性要求，这表达了我们对上述问题点解决方案的要求：

- 低代码
- 云开发

先说说低代码，这里的低代码表达的是我们实现一个模型需求的方式，也就是说我们用低代码的方式来快速实现需求，这种方式下，我们的开发流程是怎样的呢？

- 需求分析
- 方案确立（文档&会议讨论）
- 组件选择
- 在机器学习云平台勾选组件、进行DSL配置，形成工作流（工作流的输出就是解决方案的核心）
- 验证&验收
- 部署

其实和传统方式一样，低代码的核心点也要求从需求分析到部署可以形成一个独立的闭环，不过中间开发、验收、部署的过程尽量实现低代码。低代码带来的效率提升是肉眼可见的，而实现低代码的关键点在于技术与业务的抽象，这里的表现为**模块[函数]即服务**；那么通过组合各个函数，就可以很方便地形成一个端到端的工作流以作为对某个需求的解决方案。

再来说说云开发，在机器学习领域，计算资源是一个不可忽视的问题，特别是在大数据计算清洗以及模型训练这块，目前基本上绕不过几大云商。我的想法是数据在哪，我们的开发环境就可以在哪，结合`k8s`，我们可以轻松建立团队的云研发环境，比如：

- [code-server](https://github.com/cdr/code-server)

- [jupyterlab](https://github.com/jupyterlab/jupyterlab)

## 工具

目前开源社区都有不少机器学习相关的工具，我将尽量多调研较出名的工具进行评估，评估标准就是解决我上面背景部分提出的问题，下面是我关注的项目列表：

- [Orchest](https://github.com/orchest/orchest)：A new kind of IDE for Data Science.

## 说明

对本文有影响的资料：

- [万物代码化：从低代码、云开发到云研发](https://www.phodal.com/blog/codify/)